{"version":3,"sources":["main.js"],"names":["update","fadeAnimation","stepFrames","requestAnimationFrame","setVH","vh","window","innerHeight","console","log","document","documentElement","style","setProperty","getPropertyValue","setHeights","display","img","querySelector","width","ratio","naturalHeight","naturalWidth","complete","height","addEventListener","setFramesHeights","querySelectorAll","forEach","e","initFrames","f","i","position","left","top","innerWidth","TIMEOUT_MAX","makeStep","vertical","timeout","getAttribute","imgs","length","x","getTop","getLeft","step","setAttribute","element","undefined","Math","round","parseFloat","split","fade","titles","counter","previous","switched","b","opacity","getComputedStyle","delta","abs","innerHTML"],"mappings":"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","file":"main.cd7d1bb9.js","sourceRoot":"..","sourcesContent":["document.addEventListener(\"DOMContentLoaded\", () => {\n  setVH();\n  setFramesHeights();\n  initFrames();\n  requestAnimationFrame(update);\n\n  if (window.innerWidth > 600) {\n    window.addEventListener(\"resize\", () => {\n      setVH();\n      setFramesHeights();\n    });\n  }\n});\n\nfunction update() {\n  fadeAnimation();\n  stepFrames();\n  requestAnimationFrame(update);\n}\n\nfunction setVH() {\n  const vh = window.innerHeight / 100;\n  console.log(\"resizing\", { vh });\n  document.documentElement.style.setProperty(\"--vh\", `${vh}px`);\n  console.log(document.documentElement.style.getPropertyValue(\"--vh\"));\n}\n\nfunction setHeights(display) {\n  const img = display.querySelector(\"img\");\n  const { width } = img;\n  const ratio = img.naturalHeight / img.naturalWidth;\n  if (img.complete) {\n    display.style.height = `${ratio * width}px`;\n  } else {\n    img.addEventListener(\"load\", () => {\n      const { width } = img;\n      const ratio = img.naturalHeight / img.naturalWidth;\n      display.style.height = `${ratio * width}px`;\n    });\n  }\n}\n\nfunction setFramesHeights() {\n  document.querySelectorAll(\".display-image\").forEach((e) => setHeights(e));\n  document.querySelectorAll(\".display-vertical\").forEach((e) => setHeights(e));\n}\n\nfunction initFrames() {\n  document.querySelectorAll(\".display-image\").forEach((e) => {\n    e.querySelectorAll(\"img\").forEach((f, i) => {\n      f.style.position = \"absolute\";\n      f.style.left = `${-i * f.width}px`;\n    });\n  });\n  document.querySelectorAll(\".display-vertical\").forEach((e) => {\n    e.querySelectorAll(\"img\").forEach((f, i) => {\n      if (f.complete) {\n        const ratio = f.naturalHeight / f.naturalWidth;\n        f.style.position = \"absolute\";\n        f.style.top = `${-i * f.width * ratio}px`;\n      } else {\n        f.addEventListener(\"load\", () => {\n          const ratio = f.naturalHeight / f.naturalWidth;\n          f.style.position = \"absolute\";\n          f.style.top = `${-i * f.width * ratio}px`;\n        });\n      }\n    });\n  });\n}\n\nconst TIMEOUT_MAX = 240;\n\nfunction makeStep(display, vertical = false) {\n  const timeout = display.getAttribute(\"data-timeout\") || TIMEOUT_MAX;\n\n  if (timeout <= 0) {\n    const imgs = display.querySelectorAll(\"img\");\n    if (imgs.length > 2) {\n      for (let i = 0; i < imgs.length; i++) {\n        const f = imgs[i];\n        const x = vertical ? getTop(f) : getLeft(f);\n        const step = vertical ? f.height / 16 : f.width / 16;\n        if (x < 0 && x + step >= 0) {\n          display.setAttribute(\"data-timeout\", TIMEOUT_MAX);\n\n          f.style[vertical ? \"top\" : \"left\"] = `0px`;\n\n          imgs[(i + 1) % imgs.length].style[vertical ? \"top\" : \"left\"] = `${\n            vertical ? -f.height : -f.width\n          }px`;\n\n          imgs[i > 0 ? (i - 1) % imgs.length : imgs.length - 1].style[\n            vertical ? \"top\" : \"left\"\n          ] = `${vertical ? f.height : f.width}px`;\n\n          break;\n        } else {\n          f.style[vertical ? \"top\" : \"left\"] = `${x + step}px`;\n        }\n      }\n    }\n  } else {\n    display.setAttribute(\"data-timeout\", timeout - 1);\n  }\n}\n\nfunction stepFrames() {\n  document.querySelectorAll(\".display-image\").forEach((e) => makeStep(e));\n  document\n    .querySelectorAll(\".display-vertical\")\n    .forEach((e) => makeStep(e, true));\n}\n\nfunction getLeft(element) {\n  return element.style.left != undefined\n    ? Math.round(parseFloat(element.style.left.split(\"px\")[0]))\n    : 0;\n}\n\nfunction getTop(element) {\n  return element.style.top != undefined\n    ? Math.round(parseFloat(element.style.top.split(\"px\")[0]))\n    : 0;\n}\n\nconst fade = {\n  titles: [\"Front-End Developer\", \"Web Developer\", \"Fullstack Developer\"],\n  counter: 0,\n  previous: 1,\n  switched: false,\n};\n\nfunction fadeAnimation() {\n  let b = document.querySelector(\"header h3 b\");\n  const { opacity } = window.getComputedStyle(b);\n  const { titles, previous, switched } = fade;\n  const delta = Math.abs(previous - opacity);\n  fade.previous = opacity;\n\n  if (opacity <= delta) {\n    if (!switched) {\n      fade.counter++;\n      b.innerHTML = titles[fade.counter % titles.length];\n      fade.switched = true;\n    }\n  } else if (opacity >= 1 - delta) fade.switched = false;\n}\n"]}