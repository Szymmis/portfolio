{"version":3,"sources":["main.js"],"names":["update","fadeAnimation","stepFrames","requestAnimationFrame","setVH","vh","window","innerHeight","console","log","document","documentElement","style","setProperty","getPropertyValue","setHeights","display","img","querySelector","width","ratio","naturalHeight","naturalWidth","complete","height","addEventListener","setFramesHeights","querySelectorAll","forEach","e","initFrames","f","i","position","left","reversed","classList","contains","top","innerWidth","TIMEOUT_MAX","STEP_SPEED_DIVIDER","makeStep","vertical","timeout","getAttribute","imgs","length","x","getTop","getLeft","step","setAttribute","element","undefined","Math","round","parseFloat","split","fade","titles","counter","previous","switched","b","opacity","getComputedStyle","delta","abs","innerHTML"],"mappings":"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","file":"main.5f35ad79.js","sourceRoot":"..","sourcesContent":["document.addEventListener(\"DOMContentLoaded\", () => {\r\n  setVH();\r\n  setFramesHeights();\r\n  initFrames();\r\n  requestAnimationFrame(update);\r\n\r\n  if (window.innerWidth > 600) {\r\n    window.addEventListener(\"resize\", () => {\r\n      setVH();\r\n      setFramesHeights();\r\n    });\r\n  }\r\n});\r\n\r\nfunction update() {\r\n  fadeAnimation();\r\n  stepFrames();\r\n  requestAnimationFrame(update);\r\n}\r\n\r\nfunction setVH() {\r\n  const vh = window.innerHeight / 100;\r\n  console.log(\"resizing\", { vh });\r\n  document.documentElement.style.setProperty(\"--vh\", `${vh}px`);\r\n  console.log(document.documentElement.style.getPropertyValue(\"--vh\"));\r\n}\r\n\r\nfunction setHeights(display) {\r\n  const img = display.querySelector(\"img\");\r\n  const { width } = img;\r\n  const ratio = img.naturalHeight / img.naturalWidth;\r\n  if (img.complete) {\r\n    display.style.height = `${ratio * width}px`;\r\n  } else {\r\n    img.addEventListener(\"load\", () => {\r\n      const { width } = img;\r\n      const ratio = img.naturalHeight / img.naturalWidth;\r\n      display.style.height = `${ratio * width}px`;\r\n    });\r\n  }\r\n}\r\n\r\nfunction setFramesHeights() {\r\n  document.querySelectorAll(\".display-image\").forEach((e) => setHeights(e));\r\n  document.querySelectorAll(\".display-vertical\").forEach((e) => setHeights(e));\r\n}\r\n\r\nfunction initFrames() {\r\n  document.querySelectorAll(\".display-image\").forEach((e) => {\r\n    e.querySelectorAll(\"img\").forEach((f, i) => {\r\n      f.style.position = \"absolute\";\r\n      f.style.left = `${-i * f.width}px`;\r\n    });\r\n  });\r\n  document.querySelectorAll(\".display-vertical\").forEach((e) => {\r\n    const reversed = e.classList.contains(\".--reversed\");\r\n\r\n    e.querySelectorAll(\"img\").forEach((f, i) => {\r\n      if (f.complete) {\r\n        const ratio = f.naturalHeight / f.naturalWidth;\r\n        f.style.position = \"absolute\";\r\n        f.style.top = `${(reversed ? i : -i) * (f.width * ratio - 2)}px`;\r\n      } else {\r\n        f.addEventListener(\"load\", () => {\r\n          const ratio = f.naturalHeight / f.naturalWidth;\r\n          f.style.position = \"absolute\";\r\n          f.style.top = `${(reversed ? i : -i) * (f.width * ratio - 2)}px`;\r\n        });\r\n      }\r\n    });\r\n  });\r\n}\r\n\r\nconst TIMEOUT_MAX = 240;\r\nconst STEP_SPEED_DIVIDER = 48;\r\n\r\nfunction makeStep(display, vertical = false) {\r\n  const timeout = display.getAttribute(\"data-timeout\") || TIMEOUT_MAX;\r\n\r\n  const reversed = display.classList.contains(\".--reversed\");\r\n\r\n  if (timeout <= 0) {\r\n    const imgs = display.querySelectorAll(\"img\");\r\n    if (imgs.length > 2) {\r\n      for (let i = 0; i < imgs.length; i++) {\r\n        const f = imgs[i];\r\n        const x = vertical ? getTop(f) : getLeft(f);\r\n        const step = vertical\r\n          ? reversed\r\n            ? -f.height / STEP_SPEED_DIVIDER\r\n            : f.height / STEP_SPEED_DIVIDER\r\n          : f.width / STEP_SPEED_DIVIDER;\r\n        if (\r\n          (!reversed && x < 0 && x + step >= -step) ||\r\n          (reversed && x > 0 && x + step <= -step)\r\n        ) {\r\n          display.setAttribute(\"data-timeout\", TIMEOUT_MAX);\r\n\r\n          f.style[vertical ? \"top\" : \"left\"] = `0px`;\r\n\r\n          imgs[(i + 1) % imgs.length].style[vertical ? \"top\" : \"left\"] = `${\r\n            vertical ? (reversed ? f.height - 1 : -f.height + 1) : -f.width\r\n          }px`;\r\n\r\n          imgs[i > 0 ? (i - 1) % imgs.length : imgs.length - 1].style[\r\n            vertical ? \"top\" : \"left\"\r\n          ] = `${vertical ? (reversed ? -f.height : f.height) : f.width}px`;\r\n\r\n          break;\r\n        } else {\r\n          f.style[vertical ? \"top\" : \"left\"] = `${x + step}px`;\r\n        }\r\n      }\r\n    }\r\n  } else {\r\n    display.setAttribute(\"data-timeout\", timeout - 1);\r\n  }\r\n}\r\n\r\nfunction stepFrames() {\r\n  document.querySelectorAll(\".display-image\").forEach((e) => makeStep(e));\r\n  document\r\n    .querySelectorAll(\".display-vertical\")\r\n    .forEach((e) => makeStep(e, true));\r\n}\r\n\r\nfunction getLeft(element) {\r\n  return element.style.left != undefined\r\n    ? Math.round(parseFloat(element.style.left.split(\"px\")[0]))\r\n    : 0;\r\n}\r\n\r\nfunction getTop(element) {\r\n  return element.style.top != undefined\r\n    ? Math.round(parseFloat(element.style.top.split(\"px\")[0]))\r\n    : 0;\r\n}\r\n\r\nconst fade = {\r\n  titles: [\"Front-End Developer\", \"Web Developer\", \"Fullstack Developer\"],\r\n  counter: 0,\r\n  previous: 1,\r\n  switched: false,\r\n};\r\n\r\nfunction fadeAnimation() {\r\n  let b = document.querySelector(\"header h3 b\");\r\n  const { opacity } = window.getComputedStyle(b);\r\n  const { titles, previous, switched } = fade;\r\n  const delta = Math.abs(previous - opacity);\r\n  fade.previous = opacity;\r\n\r\n  if (opacity <= delta) {\r\n    if (!switched) {\r\n      fade.counter++;\r\n      b.innerHTML = titles[fade.counter % titles.length];\r\n      fade.switched = true;\r\n    }\r\n  } else if (opacity >= 1 - delta) fade.switched = false;\r\n}\r\n"]}