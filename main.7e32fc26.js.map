{"version":3,"sources":["main.js"],"names":["LANGUAGE","EN","ELEMENTS","parseLanguage","localStorage","getItem","PL","document","querySelector","src","length","querySelectorAll","forEach","e","parseElement","console","log","text","inner","undefined","innerHTML","includes","push","key","substring","indexOf","value","substr","update","fadeAnimation","stepFrames","requestAnimationFrame","setVH","vh","window","innerHeight","documentElement","style","setProperty","getPropertyValue","setFramesHeights","setHeights","display","img","width","ratio","naturalHeight","naturalWidth","complete","height","Math","round","addEventListener","initFrames","setAttribute","TIMEOUT_MAX","reversed","classList","contains","f","i","position","left","setVerticalRatio","top","innerWidth","setItem","STEP_SPEED_DIVIDER","makeStep","vertical","timeout","getAttribute","imgs","x","getTop","getLeft","step","floor","next","prev","element","parseFloat","split","fade","titles","counter","previous","switched","b","opacity","getComputedStyle","delta","abs"],"mappings":"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","file":"main.7e32fc26.js","sourceRoot":"..","sourcesContent":["let LANGUAGE = EN;\r\nlet ELEMENTS = [];\r\n\r\nfunction parseLanguage() {\r\n  LANGUAGE = localStorage.getItem(\"lang\") == \"en\" ? EN : PL;\r\n  document.querySelector(\"#language\").src = `gfx/icons/${\r\n    LANGUAGE == EN ? \"pl\" : \"gb\"\r\n  }.svg`;\r\n  if (ELEMENTS.length == 0) {\r\n    document\r\n      .querySelectorAll(\"h1,h2,h3,p,b,i,a,label\")\r\n      .forEach((e) => parseElement(e));\r\n  } else {\r\n    console.log(ELEMENTS.length);\r\n    ELEMENTS.forEach((e) => parseElement(e.e, e.text));\r\n  }\r\n}\r\n\r\nfunction parseElement(e, inner) {\r\n  let text = inner != undefined ? inner : e.innerHTML;\r\n  while (text.includes(\"{{\") && text.includes(\"}}\")) {\r\n    if (inner == undefined) ELEMENTS.push({ e, text });\r\n    const key = text.substring(text.indexOf(\"{{\") + 2, text.indexOf(\"}}\"));\r\n    const value = key.includes(\".\")\r\n      ? LANGUAGE[key.substr(0, key.indexOf(\".\"))][\r\n          key.substr(key.indexOf(\".\") + 1, key.length)\r\n        ]\r\n      : LANGUAGE[key];\r\n    e.innerHTML = text =\r\n      text.substring(0, text.indexOf(\"{{\")) +\r\n      value +\r\n      text.substring(text.indexOf(\"}}\") + 2, text.length);\r\n  }\r\n}\r\n\r\ndocument.addEventListener(\"DOMContentLoaded\", () => {\r\n  parseLanguage();\r\n  setVH();\r\n  setFramesHeights();\r\n  initFrames();\r\n  requestAnimationFrame(update);\r\n\r\n  if (window.innerWidth > 600) {\r\n    window.addEventListener(\"resize\", () => {\r\n      setVH();\r\n      setFramesHeights();\r\n      initFrames();\r\n    });\r\n  }\r\n\r\n  document.querySelector(\"#language\").addEventListener(\"click\", function () {\r\n    localStorage.setItem(\"lang\", LANGUAGE == EN ? \"pl\" : \"en\");\r\n    LANGUAGE = LANGUAGE == EN ? PL : EN;\r\n    parseLanguage();\r\n  });\r\n});\r\n\r\nfunction update() {\r\n  fadeAnimation();\r\n  stepFrames();\r\n  requestAnimationFrame(update);\r\n}\r\n\r\nfunction setVH() {\r\n  const vh = window.innerHeight / 100;\r\n  console.log(\"resizing\", { vh });\r\n  document.documentElement.style.setProperty(\"--vh\", `${vh}px`);\r\n  console.log(document.documentElement.style.getPropertyValue(\"--vh\"));\r\n}\r\n\r\nfunction setFramesHeights() {\r\n  document\r\n    .querySelectorAll(\".display-image, .display-vertical\")\r\n    .forEach((e) => setHeights(e));\r\n}\r\n\r\nfunction setHeights(display) {\r\n  const img = display.querySelector(\"img\");\r\n  const { width } = img;\r\n  const ratio = img.naturalHeight / img.naturalWidth;\r\n  if (img.complete) {\r\n    // display.style.width = `${Math.round(width)}px`;\r\n    display.style.height = `${Math.round(ratio * width)}px`;\r\n  } else {\r\n    img.addEventListener(\"load\", () => {\r\n      const { width } = img;\r\n      const ratio = img.naturalHeight / img.naturalWidth;\r\n      // display.style.width = `${Math.round(width)}px`;\r\n      display.style.height = `${Math.round(ratio * width)}px`;\r\n    });\r\n  }\r\n}\r\n\r\nfunction initFrames() {\r\n  document.querySelectorAll(\".display-image\").forEach((e) => {\r\n    e.setAttribute(\"data-timeout\", TIMEOUT_MAX);\r\n    const reversed = e.classList.contains(\"--reversed\");\r\n    e.querySelectorAll(\"img\").forEach((f, i) => {\r\n      f.style.position = \"absolute\";\r\n      f.style.left = `${(reversed ? i : -i) * f.width}px`;\r\n    });\r\n  });\r\n  document.querySelectorAll(\".display-vertical\").forEach((e) => {\r\n    e.setAttribute(\"data-timeout\", TIMEOUT_MAX);\r\n    const reversed = e.classList.contains(\"--reversed\");\r\n    e.querySelectorAll(\"img\").forEach((f, i) => {\r\n      f.complete\r\n        ? setVerticalRatio(f, i, reversed)\r\n        : f.addEventListener(\"load\", () => setVerticalRatio(f, i, reversed));\r\n    });\r\n  });\r\n}\r\n\r\nfunction setVerticalRatio(img, i, reversed) {\r\n  const ratio = img.naturalHeight / img.naturalWidth;\r\n  img.style.position = \"absolute\";\r\n  img.style.top = `${(reversed ? i : -i) * Math.round(img.width * ratio)}px`;\r\n  img.height = Math.round(img.width * ratio);\r\n}\r\n\r\nconst TIMEOUT_MAX = 240;\r\nconst STEP_SPEED_DIVIDER = 48;\r\n\r\nfunction makeStep(display, vertical = false) {\r\n  const timeout = display.getAttribute(\"data-timeout\") || TIMEOUT_MAX;\r\n\r\n  const reversed = display.classList.contains(\"--reversed\");\r\n\r\n  const imgs = display.querySelectorAll(\"img\");\r\n  if (imgs.length > 2) {\r\n    if (timeout <= 0) {\r\n      for (let i = 0; i < imgs.length; i++) {\r\n        const f = imgs[i];\r\n        const x = vertical ? getTop(f) : getLeft(f);\r\n        const step = Math.floor(\r\n          (reversed ? -1 : 1) *\r\n            (vertical\r\n              ? f.height / STEP_SPEED_DIVIDER\r\n              : f.width / STEP_SPEED_DIVIDER)\r\n        );\r\n\r\n        if (\r\n          (!reversed && x < 0 && x + step >= 0) ||\r\n          (reversed && x > 0 && x + step <= 0)\r\n        ) {\r\n          display.setAttribute(\"data-timeout\", TIMEOUT_MAX);\r\n\r\n          const next =\r\n            (vertical ? -f.height + 1 : -f.width) * (reversed ? -1 : 1);\r\n\r\n          const prev = (vertical ? f.height : f.width) * (reversed ? -1 : 1);\r\n\r\n          imgs[(i + 1) % imgs.length].style[\r\n            vertical ? \"top\" : \"left\"\r\n          ] = `${next}px`;\r\n\r\n          f.style[vertical ? \"top\" : \"left\"] = `0px`;\r\n\r\n          imgs[i > 0 ? (i - 1) % imgs.length : imgs.length - 1].style[\r\n            vertical ? \"top\" : \"left\"\r\n          ] = `${prev}px`;\r\n\r\n          break;\r\n        } else {\r\n          f.style[vertical ? \"top\" : \"left\"] = `${x + step}px`;\r\n        }\r\n      }\r\n    } else {\r\n      display.setAttribute(\"data-timeout\", timeout - 1);\r\n    }\r\n  }\r\n}\r\n\r\nfunction stepFrames() {\r\n  document.querySelectorAll(\".display-image\").forEach((e) => makeStep(e));\r\n  document\r\n    .querySelectorAll(\".display-vertical\")\r\n    .forEach((e) => makeStep(e, true));\r\n}\r\n\r\nfunction getLeft(element) {\r\n  return element.style.left != undefined\r\n    ? Math.round(parseFloat(element.style.left.split(\"px\")[0]))\r\n    : 0;\r\n}\r\n\r\nfunction getTop(element) {\r\n  return element.style.top != undefined\r\n    ? Math.round(parseFloat(element.style.top.split(\"px\")[0]))\r\n    : 0;\r\n}\r\n\r\nconst fade = {\r\n  titles: [\"Front-End Developer\", \"Web Developer\", \"Fullstack Developer\"],\r\n  counter: 0,\r\n  previous: 1,\r\n  switched: false,\r\n};\r\n\r\nfunction fadeAnimation() {\r\n  let b = document.querySelector(\"header h3 b\");\r\n  const { opacity } = window.getComputedStyle(b);\r\n  const { titles, previous, switched } = fade;\r\n  const delta = Math.abs(previous - opacity);\r\n  fade.previous = opacity;\r\n\r\n  if (opacity <= delta) {\r\n    if (!switched) {\r\n      fade.counter++;\r\n      b.innerHTML = titles[fade.counter % titles.length];\r\n      fade.switched = true;\r\n    }\r\n  } else if (opacity >= 1 - delta) fade.switched = false;\r\n}\r\n"]}